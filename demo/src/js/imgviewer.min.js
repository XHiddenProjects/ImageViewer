class ImgViewer{constructor(){}init(){let e=document.querySelectorAll(".imgViewer-container");for(let t=0;t<e.length;t++)e[t].classList.add("loaded")}mkLk(e){if(!e.match(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/ig))return e;{let t=e.match(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/ig);return e.replace(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/ig,'<a href="'+t+'" target="_blank">'+t+"</a>")}}gallery(e){if("object"!=typeof e)return console.error("gallery[1] must be a JSON object"),!1;if("number"!=typeof e.width)return console.error("gallery[1].width must be a number"),!1;if(e.width=Math.round(e.width),"boolean"!=typeof e.desc.display)return console.error("gallery[1].desc.display must be a boolean"),!1;if("boolean"!=typeof e.desc.viewer)return console.error("gallery[1].desc.viewer must be a boolean"),!1;let t=document.querySelectorAll(".imgViewer-container.loaded");for(let r=0;r<t.length;r++)if("gallery"===t[r].getAttribute("view").toLowerCase()){if(!e.desc.display||e.desc.viewer?t[r].classList.add("noCaption"):t[r].classList.add("caption"),e.desc.viewer||t[r].classList.add("noView"),void 0!==e.desc.pos){if(!/tl|tr|ct|bl|br/.test(e.desc.pos))return console.error("You must have tl(top-left)|tr(top-right)|ct(center)|bl(bottom-left)|br(bottom-right)"),!1;e.desc.pos&&t[r].classList.add("caption-"+e.desc.pos)}e.hover&&t[r].classList.add("hoverable");let a=t[r].querySelectorAll("img");for(let i=0;i<a.length;i++){let o=document.createElement("div");o.innerHTML=e.desc.display&&!e.desc.viewer?a[i].outerHTML+'<span class="ImgViewer-desc">'+(null!==a[i].getAttribute("img-desc")?this.mkLk(a[i].getAttribute("img-desc")):"")+"</span>":a[i].outerHTML,o.classList.add("view"),o.setAttribute("viewData",i+1),t[r].replaceChild(o,a[i])}/auto|1|2|3|4|5|6|7|8/.test(e.width.toString())?"auto"===e.width?t[r].setAttribute("ws",t[g].querySelectorAll("img").length+"x"):t[r].setAttribute("ws",e.width.toString()+"x"):console.error("You must have auto|1|2|3|4|5|6|7|8")}}stack(e){if("object"!=typeof e)return console.log("stack[1] must be a JSON object"),!1;if("boolean"!=typeof e.desc.display)return console.error("stack[1].desc.display must be a boolean"),!1;if("boolean"!=typeof e.desc.viewer)return console.error("stack[1].desc.viewer must be a boolean"),!1;let t=document.querySelectorAll(".imgViewer-container.loaded");for(let r=0;r<t.length;r++)if("stack"===t[r].getAttribute("view").toLowerCase()){!e.desc.display||e.desc.viewer?t[r].classList.add("noCaption"):t[r].classList.add("caption"),e.desc.viewer||t[r].classList.add("noView");let a=t[r].querySelectorAll("img");for(let i=0;i<a.length;i++){let o=document.createElement("div");o.innerHTML=e.desc.display&&!e.desc.viewer?a[i].outerHTML+'<span class="ImgViewer-desc">'+(null!==a[i].getAttribute("img-desc")?this.mkLk(a[i].getAttribute("img-desc")):"")+"</span>":a[i].outerHTML,o.classList.add("view"),o.setAttribute("viewData",i+1),o.tabIndex=i+1,i+1===1&&o.setAttribute("autofocus",!0),t[r].replaceChild(o,a[i])}}}frame(e){if("object"!=typeof e)return console.error("frame[1] must be a JSON object"),!1;if("boolean"!=typeof e.desc.display)return console.error("frame[1].desc.display must be a boolean"),!1;if("boolean"!=typeof e.desc.viewer)return console.error("frame[1].desc.viewer must be a boolean"),!1;if("string"!=typeof e.type)return console.error("frame[1].type must be a string"),!1;if("portrait"!==e.type&&"landscape"!==e.type)return console.error("frame[1].type must be a portrait or landscape"),!1;void 0===e.radius?e.radius="0":e.radius=e.radius;let t=document.querySelectorAll(".imgViewer-container.loaded");for(let r=0;r<t.length;r++)if("frame"===t[r].getAttribute("view").toLowerCase()){!e.desc.display||e.desc.viewer?t[r].classList.add("noCaption"):t[r].classList.add("caption"),e.desc.viewer||t[r].classList.add("noView"),t[r].classList.add(e.type),t[r].style.borderRadius=e.radius;let a=t[r].querySelectorAll("img");if(a.length>1||a.length<=0)return console.error("You have too many/too less images, REQUIRED MAX 1"),!1;for(let i=0;i<a.length;i++){let o=document.createElement("div");o.innerHTML=e.desc.display&&!e.desc.viewer?a[i].outerHTML+'<span class="ImgViewer-desc">'+(null!==a[i].getAttribute("img-desc")?this.mkLk(a[i].getAttribute("img-desc")):"")+"</span>":a[i].outerHTML,o.classList.add("view"),o.setAttribute("viewData",i+1),o.tabIndex=i+1,t[r].replaceChild(o,a[i])}}}viewer(e){if("object"!=typeof e)return console.error("viewer[1] must be a JSON object"),!1;if("boolean"!=typeof e.static)return console.error("viewer[1].static must be a boolean!"),!1;if("object"!=typeof e.base?e.base={download:!0,copy:!0,clone:!0}:("boolean"!=typeof e.base.download&&(e.base.download=!0),"boolean"!=typeof e.base.download?e.base.download=!0:e.base.download=e.base.download,"boolean"!=typeof e.base.copy?e.base.copy=!0:e.base.copy=e.base.copy,"boolean"!=typeof e.base.open?e.base.open=!0:e.base.open=e.base.open,"boolean"!=typeof e.base.clone?e.base.clone=!0:e.base.clone=e.base.clone),"string"!=typeof e.animate?e.animate="":e.animate=e.animate,""!==e.animate&&"curtain"!==e.animate&&"slideshow"!==e.animate)return console.error("viewer[1].animate must be NULL, curtain, or slideshow!"),!1;let t=document.querySelectorAll(".imgViewer-container.loaded");void 0!==e.static&&e.static;for(let r=0;r<t.length;r++)if(!t[r].className.match("noView")){t[r].classList.add("ImgViewer-viewable");let a=document.createElement("div");a.classList.add("ImgViewer-viewImg"),e.static&&a.classList.add("static"),e.static||a.setAttribute("onclick","zoomImg('out', this, event);"),""!==e.animate&&a.classList.add(e.animate),a.innerHTML='<nav><ul class="nav-link">'+(e.base.download?'<li><a class="img-download" href="#" download="#"><i class="fa-solid fa-download"></i></a></li>':"")+(e.base.copy?'<li><a class="img-url-copy" href="#" img-copy-data="" onclick="copyURL(this.getAttribute(\'img-copy-data\'))"><i class="fa-solid fa-link"></i></a></li>':"")+(e.base.open?'<li><a class="img-url-open" href="#" img-copy-data="" onclick="window.open(this.getAttribute(\'img-copy-data\'),\'_blank\')"><i class="fa-solid fa-arrow-up-right-from-square"></i></a></li>':"")+(e.base.clone?'<li><a class="img-copy" href="#" img-copy-data="" onclick="copyURL(this.getAttribute(\'img-copy-data\'), false)"><i class="fa-solid fa-clone"></i></a></li>':"")+'<li><span class="ImgViewer-close" onclick="zoomImg(\'out\', this, event, true)"><i class="fa-solid fa-x"></i></span></li></ul></nav><img/><p></p>',document.querySelector("body").appendChild(a);let i=t[r].querySelectorAll("div.view");for(let o=0;o<i.length;o++)i[o].setAttribute("onclick",'zoomImg("in",this, event);')}}resize(e){if("number"!=typeof e)return console.error("resize[1] must be a number"),!1;let t=document.querySelector('.imgViewer-container.loaded[view="frame"] [viewdata="'+parseInt(e)+'"]');if(t){let r=t.querySelector("img").getBoundingClientRect(),a=document.createElement("div");a.className="rtangle",a.style.width=r.width+"px",a.style.height=r.height+"px",a.setAttribute("onmousemove","resizeGrayBox(this, event)"),t.appendChild(a)}}crop(e){if("number"!=typeof e)return console.error("crop[1] must be a number"),!1;let t=document.querySelector('.imgViewer-container.loaded[view="frame"] [viewdata="'+parseInt(e)+'"]');if(t){let r=t.querySelector("img").getBoundingClientRect(),a=document.createElement("div");a.className="ctangle",a.style.width=r.width+"px",a.style.height=r.height+"px",a.setAttribute("onmousemove","cropGrayBox(this, event);"),t.appendChild(a)}}grayscale(e){return e.match(/^[\d]+%$/)?"grayscale("+e+")":(console.error("grayscale[1] must be a percentage!"),!1)}blur(e){return e.match(/^[\d]+px$/)?"blur("+e+")":(console.error("blur[1] must be a pixel!"),!1)}brightness(e){return e.match(/^[\d]+%$/)?"brightness("+e+")":(console.error("bright[1] must be a percentage!"),!1)}contrast(e){return e.match(/^[\d]+%$/)?"contrast("+e+")":(console.error("contrast[1] must be a percentage!"),!1)}dropShadow(e,t,r,a,i){return e.match(/^[\d]+px$/)?t.match(/^[\d]+px$/)?r.match(/^[\d]+px$/)?a.match(/^[\d]+px$/)?i.match(/^((rgba\([\d]{1,3},[\d]{1,3},[\d]{1,3},([0-1]*\.[0-9]+)\))|(rgb\([\d]{1,3},[\d]{1,3},[\d]{1,3}\))|(\#[\da-f]{6}|[a-z]+))$/)?"drop-shadow("+e+" "+t+" "+r+" "+(a.match("0px")?"":a+" ")+i+")":(console.error("dropShadow[5] must rgb(), rgba(), hex, or color name!"),!1):(console.error("dropShadow[4] must be a pixal!"),!1):(console.error("dropShadow[3] must be a pixal!"),!1):(console.error("dropShadow[2] must be a pixal!"),!1):(console.error("dropShadow[1] must be a pixal!"),!1)}hueRotate(e){return e.match(/^[\d]+deg$/)?"hue-rotate("+e+")":(console.error("hueRotate[1] must be a degree!"),!1)}invert(e){return e.match(/^[\d]+%$/)?"invert("+e+")":(console.error("invert[1] must be a percentage!"),!1)}opacity(e){return e.match(/^[\d]+%$/)?"opacity("+e+")":(console.error("opacity[1] must be a percentage!"),!1)}saturate(e){return e.match(/^[\d]+%$/)?"saturate("+e+")":(console.error("saturate[1] must be a percentage!"),!1)}sepia(e){return e.match(/^[\d]+%$/)?"sepia("+e+")":(console.error("sepia[1] must be a percentage!"),!1)}filters(e,t){let r=[];if("number"!=typeof e)return console.error("filters[1] must be a number"),!1;if("object"!=typeof t)return console.error("filters[2] must be an JSON object"),!1;"string"==typeof t.blur&&r.push(this.blur(t.blur)),"string"==typeof t.brightness&&r.push(this.brightness(t.brightness)),"string"==typeof t.grayscale&&r.push(this.grayscale(t.grayscale)),"string"==typeof t.contrast&&r.push(this.contrast(t.contrast)),Array.isArray(t.dropShadow)&&r.push(this.dropShadow(t.dropShadow[0],t.dropShadow[1],t.dropShadow[2],t.dropShadow[3],t.dropShadow[4],t.dropShadow[5])),"string"==typeof t.hueRotate&&r.push(this.hueRotate(t.hueRotate)),"string"==typeof t.invert&&r.push(this.invert(t.invert)),"string"==typeof t.opacity&&r.push(this.opacity(t.opacity)),"string"==typeof t.saturate&&r.push(this.saturate(t.saturate)),"string"==typeof t.sepia&&r.push(this.sepia(t.sepia));let a=document.querySelector('.imgViewer-container.loaded [viewdata="'+parseInt(e)+'"] img');r.length>0&&a.setAttribute("style","filter:"+r.join(" "))}}var resizing=!1,cropping=!1,dT=0,dR=0,dB=0,dL=0;function killViews(e){document.querySelector(e).remove()}function resizeGrayBox(e,t){if(e.addEventListener("mousedown",function(){resizing=!0}),e.addEventListener("mouseup",function(){setTimeout(function(){resizing=!1;let t=e.getBoundingClientRect();e.parentElement.querySelector("img").style.width=t.width+"px",e.parentElement.querySelector("img").style.height=t.height+"px",killViews(".rtangle")},100)}),resizing){let r=e.parentElement.getBoundingClientRect();if(t.clientX>r.width+1);else{let a=t.clientX;e.style.width=a.toString()+"px"}if(t.clientY>r.height+1);else{let i=t.clientY;e.style.height=i.toString()+"px"}}}function cropGrayBox(e,t){if(e.addEventListener("mousedown",function(){dT=e.getBoundingClientRect().top,dR=e.getBoundingClientRect().right,dB=e.getBoundingClientRect().bottom,dL=e.getBoundingClientRect().left,cropping=!0}),e.addEventListener("mouseup",function(){setTimeout(function(){cropping=!1;let t=e.getBoundingClientRect();e.parentElement.querySelector("img").style.clipPath="inset("+(dT-t.top)+"px "+(dR-t.right)+"px "+(dB-t.bottom)+"px "+(dL-t.left)+"px)",e.parentElement.style.clipPath="inset("+(dT-t.top)+"px "+(dR-t.right)+"px "+(dB-t.bottom)+"px "+(dL-t.left)+"px)",e.parentElement.classList.add("noBorder"),killViews(".ctangle")},100)}),cropping){let r=e.parentElement.getBoundingClientRect();if(t.clientX>r.width+1);else{let a=t.clientX;e.style.width=a.toString()+"px"}if(t.clientY>r.height+1);else{let i=t.clientY;e.style.height=i.toString()+"px"}}}async function copyURL(e,t=!0){if(t)navigator.clipboard.writeText(e)?alert("Successfully copied to clipboard!"):alert("Failed to copy to clipboard!");else{let r=async e=>{let t=[new ClipboardItem({[e.type]:e})];try{await navigator.clipboard.write(t)}catch(r){alert("Failed to copy to clipboard!")}finally{alert("Successfully copied to clipboard!")}},a=await fetch(e),i=await a.blob();await r(i)}}function zoomImg(e,t,r,a=!1){var i,o,s,l;if(resizing||cropping)return!1;if("string"!=typeof e)return console.error("zoomImg[1] must be a string"),!1;if("object"!=typeof t)return console.error("zoomImg[2] must be a object"),!1;if("object"!=typeof r)return console.error("zoomImg[3] must be a object"),!1;if("boolean"!=typeof a)return console.error("zoomImg[4] must be a boolean"),!1;let n=document.querySelector(".ImgViewer-viewImg");switch(n.className.match("curtain")?(i="100%",o="0px",s="100%",l="100%"):n.className.match("slideshow")?(i="0px",o="100%",s="100%",l="100%"):(i="0px",o="0px",s="100%",l="100%"),e){case"in":n.style.width=s,n.style.height=l,n.style.opacity=1,n.style.zIndex=1,n.classList.toggle("opened"),n.querySelector("img").src=t.querySelector("img").src,n.querySelector("p").innerHTML="<span>"+new ImgViewer().mkLk(t.querySelector("img").getAttribute("img-desc"))+"</span>",n.querySelector("nav a.img-download")&&(n.querySelector("nav a.img-download").href=t.querySelector("img").src),n.querySelector("nav a.img-url-copy")&&n.querySelector("nav a.img-url-copy").setAttribute("img-copy-data",t.querySelector("img").src),n.querySelector("nav a.img-url-open")&&n.querySelector("nav a.img-url-open").setAttribute("img-copy-data",t.querySelector("img").src),n.querySelector("nav a.img-copy")&&n.querySelector("nav a.img-copy").setAttribute("img-copy-data",t.querySelector("img").src),n.querySelector("nav a")&&(n.querySelector("nav a").download=t.querySelector("img").alt);break;case"out":if(a&&"boolean"==typeof a)n.style.width=i,n.style.height=o,n.style.opacity=0,n.style.zIndex=-1,n.classList.toggle("opened");else try{if(!r.target.className.match("ImgViewer-viewImg")||void 0===r.target)return!1;n.style.width=i,n.style.height=o,n.style.opacity=0,n.style.zIndex=-1,n.classList.toggle("opened")}catch(c){return!1}}}